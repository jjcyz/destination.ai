@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply min-h-screen;
    /* Safe area insets for notched devices */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@layer components {
  /* Enhanced Glass morphism components */
  .glass {
    @apply bg-white/10 backdrop-blur-md border border-white/20 shadow-glass;
  }

  .glass-card {
    @apply bg-white/70 backdrop-blur-xl border border-white/40 shadow-glass rounded-2xl;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }

  .glass-card-strong {
    @apply bg-white/85 backdrop-blur-2xl border border-white/50 shadow-glass rounded-2xl;
    backdrop-filter: blur(24px) saturate(200%);
    -webkit-backdrop-filter: blur(24px) saturate(200%);
  }

  .glass-input {
    @apply bg-white/60 backdrop-blur-sm border border-white/40 rounded-xl shadow-glass-inset;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Modern buttons */
  .btn-primary {
    @apply bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 active:scale-95;
  }

  .btn-secondary {
    @apply bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-600 hover:to-secondary-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 active:scale-95;
  }

  .btn-glass {
    @apply glass-card hover:bg-white/90 text-gray-700 font-medium py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 active:scale-95;
  }

  /* Input fields */
  .input-field {
    @apply glass-input w-full px-4 py-3 text-gray-700 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-300;
  }

  /* Cards */
  .card {
    @apply glass-card p-6;
  }

  .card-compact {
    @apply glass-card p-4;
  }

  /* Route components */
  .route-step {
    @apply flex items-center space-x-4 p-4 glass-card border-l-4 border-primary-500/50 hover:border-primary-500 transition-all duration-300;
  }

  .sustainability-badge {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200/50;
  }

  /* Mode icons */
  .mode-icon {
    @apply w-10 h-10 flex items-center justify-center rounded-xl text-white font-bold text-lg shadow-lg;
  }

  .mode-walking { @apply bg-gradient-to-br from-blue-500 to-blue-600; }
  .mode-biking { @apply bg-gradient-to-br from-green-500 to-green-600; }
  .mode-scooter { @apply bg-gradient-to-br from-yellow-500 to-orange-500; }
  .mode-car { @apply bg-gradient-to-br from-red-500 to-red-600; }
  .mode-bus { @apply bg-gradient-to-br from-purple-500 to-purple-600; }
  .mode-skytrain { @apply bg-gradient-to-br from-indigo-500 to-indigo-600; }

  /* Status indicators */
  .status-indicator {
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium;
  }

  .status-good { @apply bg-green-100 text-green-800 border border-green-200; }
  .status-warning { @apply bg-yellow-100 text-yellow-800 border border-yellow-200; }
  .status-error { @apply bg-red-100 text-red-800 border border-red-200; }

  /* Loading states */
  .loading-spinner {
    @apply animate-spin rounded-full h-8 w-8 border-2 border-primary-200 border-t-primary-600;
  }

  .loading-dots {
    @apply flex space-x-1;
  }

  .loading-dot {
    @apply w-2 h-2 bg-primary-500 rounded-full animate-pulse;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-white/20 rounded-full;
}

::-webkit-scrollbar-thumb {
  @apply bg-white/40 rounded-full hover:bg-white/60 transition-colors duration-200;
}

/* Map container */
.leaflet-container {
  height: 100%;
  width: 100%;
  border-radius: 1rem;
  overflow: hidden;
  background-color: #f8fafc;
}

/* Mobile map optimizations */
@media (max-width: 768px) {
  .leaflet-container {
    border-radius: 0.75rem;
  }

  /* Ensure map tiles load properly on mobile */
  .leaflet-tile {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  /* Better touch handling */
  .leaflet-control-zoom {
    margin: 10px !important;
  }

  .leaflet-control-zoom a {
    width: 40px !important;
    height: 40px !important;
    line-height: 40px !important;
    font-size: 18px !important;
  }
}

/* Route line styles */
.route-line {
  stroke-width: 5;
  stroke-opacity: 0.8;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.route-line-fastest {
  stroke: url(#gradient-fastest);
}

.route-line-safest {
  stroke: url(#gradient-safest);
}

.route-line-energy-efficient {
  stroke: url(#gradient-energy);
}

.route-line-scenic {
  stroke: url(#gradient-scenic);
}

.route-line-healthy {
  stroke: url(#gradient-healthy);
}

.route-line-cheapest {
  stroke: url(#gradient-cheapest);
}

/* Enhanced Mobile optimizations */
@media (max-width: 768px) {
  .glass-card {
    @apply bg-white/85 backdrop-blur-lg;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  .glass-card-strong {
    @apply bg-white/90 backdrop-blur-xl;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  .btn-primary, .btn-secondary, .btn-glass {
    @apply py-4 px-6 text-base min-h-[48px];
  }

  .input-field {
    @apply py-4 px-4 text-base min-h-[48px];
  }

  /* Better touch targets */
  .mode-icon, .preference-button {
    @apply min-h-[44px] min-w-[44px];
  }
}

/* Touch-friendly interactions */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

@media (hover: none) and (pointer: coarse) {
  .btn-primary, .btn-secondary, .btn-glass {
    @apply hover:scale-100 active:scale-95;
  }

  /* Larger touch targets for mobile */
  button, input, select {
    @apply min-h-[44px];
  }

  /* Improve drawer menu touch interactions */
  nav button {
    @apply min-h-[48px];
  }
}

/* iPhone specific optimizations */
@supports (-webkit-touch-callout: none) {
  .glass-card {
    @apply bg-white/80;
  }

  /* Fix for iOS backdrop blur */
  .glass-card, .glass-card-strong {
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
}
